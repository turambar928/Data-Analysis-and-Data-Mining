# 临床数据分析与数据挖掘项目

## 项目概述

本项目是一个临床数据分析与数据挖掘工作坊，主要针对匿名化的临床数据进行多维度分析，包括数据预处理、探索性分析、聚类分析、时间序列分析、关联规则挖掘和临床决策支持等。项目旨在从医疗数据中发现有价值的模式和关联，为临床决策提供数据支持。通过对实验室检查结果的深入分析，我们可以识别潜在的疾病风险因素，发现不同患者群体的特征，并构建预测模型辅助临床决策。

## 数据集

项目使用的数据集为"anonymized data for workshop.xlsx"，包含：
- 27,351条记录，来自多个科室的患者数据
- 110个变量，包括各类实验室检测指标和患者信息
- 主要包括患者基本信息（如住院号码、入院时间、出院时间、科室等）
- 大量实验室检查结果（如电解质、肾功能、肝功能、血糖、甲状腺功能等指标）
- 住院信息（如住院天数、诊断等）

数据集存在一定程度的缺失值，部分指标的缺失率超过80%，这反映了真实临床环境中数据收集的挑战。

## 项目结构

本项目包含多个分析模块，每个模块专注于不同的分析任务：

### 1. 数据预处理与探索

- **data_exploration.py**: 基础数据探索脚本，对数据集进行初步分析。该脚本计算并展示数据集的基本统计信息，包括数据集大小、列信息、缺失值比例、数值列的统计摘要等。分析结果保存在initial_analysis_results.txt文件中，便于后续参考。

### 2. 临床数据分析

- **clinical_data_exploration.py**: 临床数据的深入探索脚本，包含多个分析模块。该脚本对数据进行缺失值分析，识别异常值，计算实验室指标间的相关性，并生成相关性热力图。还包括主成分分析(PCA)和聚类分析，以发现数据中的潜在模式。所有可视化结果保存在visualizations目录中。

- **metabolic_analysis.py**: 代谢通路和离子通道关联分析脚本。重点分析胎岛素信号通路、甲状腺和骨代谢关系以及电解质平衡。脚本计算各代谢指标间的相关性，生成相关性热力图，并对指标进行聚类分析以识别不同的代谢模式。结果以图表形式保存。

- **diabetes_clustering_analysis.py**: 糖尿病相关指标的聚类分析脚本。重点分析胎岛素、血糖、C肥、糖化血红蛋白等指标，使用K-means算法对患者进行聚类，识别不同的糖尿病代谢模式。脚本生成聚类结果的可视化图表，并计算每个聚类的统计特征。

### 3. 高级分析模块

- **cluster.py**: 基于时间序列的聚类分析，包括血糖和肌酐轨迹分析
- **enhanced_cluster_analysis.py**: 增强的聚类分析，包括详细的聚类特征分析
- **temporal_pattern_mining.py**: 时间模式挖掘，分析指标随时间变化的趋势
- **clinical_association_rules.py**: 临床关联规则挖掘，发现指标间的关联关系
- **clinical_decision_support.py**: 临床决策支持系统，构建预测模型

## 主要功能

1. **数据清洗与预处理**：处理缺失值、异常值，转换数据类型
2. **探索性数据分析**：统计分析、分布可视化、相关性分析
3. **聚类分析**：对患者进行分组，发现潜在的患者亚型
4. **时间序列分析**：分析指标随时间的变化模式
5. **关联规则挖掘**：发现指标间的关联规则
6. **预测模型构建**：构建决策树等模型，预测临床结果
7. **可视化**：生成各类图表，直观展示分析结果

## 分析结果

项目生成多种分析结果，包括：

- 初步分析结果保存在 `initial_analysis_results.txt`
- 可视化结果保存在 `visualizations` 目录
- 聚类分析结果保存在 `cluster_analysis_results` 目录
- 时间模式分析结果保存在 `temporal_analysis_results` 目录
- 关联规则分析结果保存在 `association_rules_results` 目录
- 临床决策支持结果保存在 `decision_support_results` 目录

## 主要发现

1. 数据集包含27,351条记录和110个变量，但存在大量缺失值（部分列缺失率>80%）
2. 通过PCA降维发现数据中的主要变异模式
3. 聚类分析识别出多个患者亚组，具有不同的临床特征
4. 时间序列分析显示实验室值的时间模式
5. 关联规则挖掘发现了多个有意义的指标关联
6. 决策树模型能够预测特定临床结果

## 使用方法

1. 确保安装了所需的Python库：pandas, numpy, matplotlib, seaborn, scikit-learn等
2. 将"anonymized data for workshop.xlsx"数据文件放在项目根目录
3. 运行各个分析脚本，例如：
   ```
   python data_exploration.py
   python clinical_data_exploration.py
   python cluster.py
   ```
4. 查看生成的分析结果和可视化图表

## 注意事项

- 部分分析需要较长时间运行，特别是时间序列聚类和关联规则挖掘
- 可视化结果会自动保存到相应的目录中
- 部分分析可能因数据缺失而无法完成，脚本会输出相应的警告信息
